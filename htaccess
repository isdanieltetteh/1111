RewriteEngine On

# --- NEW: if URL ends with / but maps to a .php file, 301 to no-slash ---
# e.g. /review/  -> /review   (because review.php exists)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(.+)/$ [NC]
RewriteCond %{DOCUMENT_ROOT}%1.php -f
RewriteRule ^ %1 [R=301,L]

# --- SAFETY: don't rewrite real files/dirs or static assets ---
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

RewriteCond %{REQUEST_URI} \.(?:css|js|png|jpg|jpeg|gif|webp|svg|ico|woff2?|ttf|eot|map)$ [NC]
RewriteRule ^ - [L]

# Pretty route: /review/123 -> review.php?id=123
RewriteRule ^review/([0-9]+)/?$ review.php?id=$1 [L,QSA,NC]

# Extensionless access to ANY .php: /something -> /something.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+?)/?$ $1.php [L,QSA,NC]

# Canonical: strip .php shown in the address bar
RewriteCond %{THE_REQUEST} \s/+(.+?)\.php([?\s]) [NC]
RewriteRule ^ %1 [R=301,L,NE]

# Apache .htaccess example
<FilesMatch "\.(js|css)$">
    Header set Access-Control-Allow-Origin "faucetguard.live"
    Header set X-Content-Type-Options "nosniff"
</FilesMatch>
# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php81” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit


